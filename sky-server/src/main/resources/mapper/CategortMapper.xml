<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sky.mapper.CategoryMapper">
    <insert id="insert" parameterType="com.sky.dto.CategoryDTO">
        INSERT INTO category (
            type,
            name,
            sort,
            status,
            create_time,
            update_time,
            create_user,
            update_user
        ) VALUES (
                     #{type},
                     #{name},
                     #{sort},
                     #{status},
                     #{createTime},
                     #{updateTime},
                     #{createUser},
                     #{updateUser}
                 )
    </insert>
    <update id="update" parameterType="com.sky.entity.Category">
        UPDATE category
        <set>
            <if test="type != null"> type = #{type}, </if>
            <if test="name != null"> name = #{name}, </if>
            <if test="sort != null"> sort = #{sort}, </if>
            <if test="status != null"> status = #{status}, </if>
            <if test="updateTime != null"> update_time = #{updateTime}, </if>
            <if test="updateUser != null"> update_user = #{updateUser} </if>
        </set>
        WHERE id = #{id}
    </update>

    <select id="pageQuery" resultType="com.sky.entity.Category"
            parameterType="com.sky.dto.CategoryPageQueryDTO">

        SELECT *
        FROM category
        <where>
            <!-- 分类名称模糊查询 -->
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>

            <!-- 分类类型精确查询 -->
            <if test="type != null">
                AND type = #{type}
            </if>
        </where>



    </select>
</mapper>